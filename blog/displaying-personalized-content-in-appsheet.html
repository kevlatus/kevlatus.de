<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><title>Displaying personalized content in AppSheet</title><link rel="alternate" type="application/rss+xml" href="/rss.xml"/><link rel="icon" href="/assets/images/ic-kevlatus-circle-48.png"/><link rel="apple-touch-icon" sizes="48x48" href="/assets/images/ic-kevlatus-circle-48.png"/><link rel="apple-touch-icon" sizes="72x72" href="/assets/images/ic-kevlatus-circle-72.png"/><link rel="apple-touch-icon" sizes="96x96" href="/assets/images/ic-kevlatus-circle-96.png"/><link rel="apple-touch-icon" sizes="144x144" href="/assets/images/ic-kevlatus-circle-144.png"/><link rel="apple-touch-icon" sizes="192x192" href="/assets/images/ic-kevlatus-circle-192.png"/><link rel="apple-touch-icon" sizes="256x256" href="/assets/images/ic-kevlatus-circle-256.png"/><link rel="apple-touch-icon" sizes="384x384" href="/assets/images/ic-kevlatus-circle-384.png"/><link rel="apple-touch-icon" sizes="512x512" href="/assets/images/ic-kevlatus-circle-512.png"/><meta name="theme-color" content="#3786E9"/><meta property="author" content="Kevin Latusinski"/><meta name="description" content="Personal page and blog by Kevin Latusinski."/><meta property="og:description" content="Personal page and blog by Kevin Latusinski."/><meta property="og:url" content="https://www.kevlatus.de/blog/displaying-personalized-content-in-appsheet"/><meta property="og:title" content="Displaying personalized content in AppSheet"/><meta property="og:type" content="article"/><meta name="twitter:card" content="summary"/><meta name="twitter:creator" content="@kevlatus"/><meta name="twitter:title" content="Displaying personalized content in AppSheet"/><meta name="twitter:description" content="Personal page and blog by Kevin Latusinski."/><meta name="twitter:url" content="https://www.kevlatus.de/blog/displaying-personalized-content-in-appsheet"/><meta property="twitter:image" content="https://raw.githubusercontent.com/kevlatus/kevlatus.de/main/public/assets/images/ic-kevlatus-circle-512.png"/><link rel="preload" href="https://use.typekit.net/xhs5wzt.css" as="style"/><link rel="stylesheet" href="https://use.typekit.net/xhs5wzt.css"/><meta name="next-head-count" content="29"/><link rel="preload" href="/_next/static/css/6fdb70c308a6ff591bfe.css" as="style"/><link rel="stylesheet" href="/_next/static/css/6fdb70c308a6ff591bfe.css" data-n-g=""/><link rel="preload" href="/_next/static/css/8d63a2e4a24070d2bde7.css" as="style"/><link rel="stylesheet" href="/_next/static/css/8d63a2e4a24070d2bde7.css" data-n-p=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-2655500d03e7dd101362.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-3fa9c3f14a376ed1bf6b.js" as="script"/><link rel="preload" href="/_next/static/chunks/framework.f783f7e0d786735fc5cd.js" as="script"/><link rel="preload" href="/_next/static/chunks/139d2c06ce5befccb6edae863d7326790fa3e613.1f52a3ec41a5d5095e70.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-c554078b78e7d9d328a5.js" as="script"/><link rel="preload" href="/_next/static/chunks/06cfb1e0a9d9bd2a46840ce3dc1d97af8be2589f.ad1af2db6fc57853b772.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/blog/%5Bslug%5D-af3bc8689d0109f413c9.js" as="script"/></head><body><script>var q=window.matchMedia('(prefers-color-scheme: dark)');function c(e){document.body.className=e.matches?'dark':'light'};q.addEventListener('change',c);c(q)</script><div id="__next"><div class="min-h-full flex flex-col bg-primary-o2"><header class="px-6 py-2 flex items-center"><a href="/"><svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1000 1000" class="text-primary fill-current w-6 h-6"><defs><linearGradient id="ic-kevlatus_svg__a" x1="326.17" y1="699.84" x2="900" y2="699.84" gradientUnits="userSpaceOnUse"><stop offset="0" stop-opacity="0.4"></stop><stop offset="1" stop-opacity="0"></stop></linearGradient></defs><path d="M100 836.13V163.87c0-33.48 25.81-61.73 59.24-63.75a63.16 63.16 0 0167.08 63v673.72a63.16 63.16 0 01-67.08 63c-33.43-1.98-59.24-30.23-59.24-63.71zM331.4 563.13a63.13 63.13 0 01-7.86-125.75 614.42 614.42 0 00229.08-76.33c119.23-68.22 190.45-162.35 229.19-229.31A63.12 63.12 0 11891.08 195C844.56 275.36 759 388.44 615.31 470.63a740.07 740.07 0 01-275.89 92 64.22 64.22 0 01-8.02.5z"></path><path d="M836.93 899.78a63.11 63.11 0 01-54.7-31.52C743.49 801.3 672.27 707.17 553 639a614.42 614.42 0 00-229-76.38 63.12 63.12 0 0115.88-125.24 740.07 740.07 0 01275.89 92C759.37 611.56 845 724.64 891.5 805a63.14 63.14 0 01-54.57 94.75z"></path><path d="M868.48 891.28a63.09 63.09 0 01-86.25-23C743.49 801.3 672.27 707.17 553 639a614.14 614.14 0 00-226.87-76c1.73.15 3.47.22 5.23.22a64.22 64.22 0 008-.51 742.24 742.24 0 00219.2-62.72q29.1 13.44 57.11 29.47C759.37 611.56 845 724.64 891.5 805a63.13 63.13 0 01-23.02 86.28z" fill="url(#ic-kevlatus_svg__a)"></path></svg></a><div class="flex-grow"></div><nav class="flex space-x-4"><a class="NavLink_link__GxAtT" href="/"><svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 54" class="NavLink_brush__2Hxlw"><path d="M16 40c7.29 2.25 16.18-.69 23.54 1.36 8.82 2.72 18.38 2.72 27.2 2.72 0-1.36-.73-3.4 0-4.08 2.94-2 2.94-4.77 2.94-7.5 0-1.36-2.2 0-1.47-1.36-2.2 0-5.88-.68-3.67-2 .73-1.36 3.67 0 4.41-2s-.74-4.09 0-6.13h2.94c.73-1.37-.74-4.09 0-4.09 2.2-1.36 5.15-.68 8.09-.68 0-1.36.73-2.72-.74-3.41C53.49 11.36 27 8.64 1.28 10.68c-2.94.68-.74 3.41 1.47 5.45-.74-.68-.74 1.36-1.47.68 0 2 1.47 5.45 4.41 6.13H3.48c-.73.68 0 2 0 3.4.74 0 1.47 0 1.47.69v2.72H2c.74 0 1.47 0 1.47.68v2.73c1.47.68 3.68-.69 5.15 0v2c-1.47.68-3.68 0-5.15 0 .74.68.74 1.36.74 2.72 2.2.68 4.41-1.36 6.62.68h-2.2C10.1 42 13.78 39.28 16 40z"></path></svg><div class="type-display text-xl">Home</div></a><a class="NavLink_link__GxAtT NavLink_active__189zX" href="/blog"><svg data-name="Layer 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 80 54" class="NavLink_brush__2Hxlw"><path d="M16 40c7.29 2.25 16.18-.69 23.54 1.36 8.82 2.72 18.38 2.72 27.2 2.72 0-1.36-.73-3.4 0-4.08 2.94-2 2.94-4.77 2.94-7.5 0-1.36-2.2 0-1.47-1.36-2.2 0-5.88-.68-3.67-2 .73-1.36 3.67 0 4.41-2s-.74-4.09 0-6.13h2.94c.73-1.37-.74-4.09 0-4.09 2.2-1.36 5.15-.68 8.09-.68 0-1.36.73-2.72-.74-3.41C53.49 11.36 27 8.64 1.28 10.68c-2.94.68-.74 3.41 1.47 5.45-.74-.68-.74 1.36-1.47.68 0 2 1.47 5.45 4.41 6.13H3.48c-.73.68 0 2 0 3.4.74 0 1.47 0 1.47.69v2.72H2c.74 0 1.47 0 1.47.68v2.73c1.47.68 3.68-.69 5.15 0v2c-1.47.68-3.68 0-5.15 0 .74.68.74 1.36.74 2.72 2.2.68 4.41-1.36 6.62.68h-2.2C10.1 42 13.78 39.28 16 40z"></path></svg><div class="type-display text-xl">Blog</div></a></nav><div class="flex-grow"></div><div class="w-6 h-6"></div></header><main class="flex-grow px-2 py-4"><article class="prose prose-sm sm:prose lg:prose-lg xl:prose-2xl mx-auto ArticlePage_article__914Fb"><h2 class="ArticlePage_heading__133R1">Displaying personalized content in AppSheet</h2><div class="flex"><div class="text-xs"><span>13<!-- --> <!-- -->February<!-- --> <!-- -->2021</span><span> | </span><span>~<!-- -->6<!-- --> min read</span></div><div class="flex-grow"></div><a class="text-xs" href="https://getpocket.com/edit?url=https%3A%2F%2Fwww.kevlatus.de%2Fblog%2Fdisplaying-personalized-content-in-appsheet" target="_blank">Save to Pocket</a></div><p>I&#x27;m currently trying to build apps without writing code to find the limits and potential of no-code platforms. This article adds personalization to <a href="https://www.kevlatus.de/blog/building-a-room-booking-app-without-writing-code">a room booking app built with AppSheet</a>. The app allows users to manage rooms within their buildings and booking those rooms for meetings. If you are new to AppSheet, I recommend <a href="https://www.kevlatus.de/blog/building-a-room-booking-app-without-writing-code">reading this article</a> first.</p><p>Our goal is to show users a list of their bookings as well as their favorite rooms. These views enhance user experience tremendously by providing quick access to relevant information. Let&#x27;s get started with the personal booking overview: it makes use of AppSheet&#x27;s slices under Data &gt; Slices in the menu. A slice is a filtered subset of data, which can be used like a table. Since a booking already contains a column for the corresponding user, the filter condition is simply <code>[User] = USEREMAIL()</code>, as shown in the screenshot below.</p><p><img src="//images.ctfassets.net/8iljeer8gbww/17cvRud0N3euvGTPXPlgkW/51ebc888636be1dafdd36553a53b6349/img-appsheet-booking-slice.jpg" alt="img-appsheet-booking-slice"/></p><p>Now, this slice can be used as the source of a new view in the UX menu. We call it &quot;My Bookings&quot; and select our slice <em>for this data</em>. I personally prefer the card view for this page, because it lets us show the room&#x27;s picture, name and booking date, which makes for a clean and simple overview. And actually, that&#x27;s all what is needed for adding the personal booking list.</p><p>Building the favorite rooms view turns out to be trickier. When browsing through AppSheet&#x27;s features, you might stumble upon its <em>User Settings</em> in the <em>Data</em> menu. While this sounds like a suitable solution for storing preferences and favorites, it suffers from a hidden limitation: values stored in user settings are not synced across devices. This would lead to favorites being different, depending on the device a user opens your app on. Though useful in some situations, I&#x27;d rather keep the experience consistent across mobile and the web by writing the information into a Google Sheet.</p><p>When initially working on this feature, I found an approach <a href="https://community.appsheet.com/t/i-would-like-to-create-a-favorites-behavior/3811">in the forums</a>, which adds and removes users&#x27; email addresses to a text column. Although this is a simple solution, which works in small apps, larger apps will run into issues: two users simultaneously adding a room to their favorites, results in a race condition for updating the cell value and data from one of the users might not be stored. Furthermore, searching for mail addresses in a long string of a much liked room is rather time consuming and decreases performance for loading favorites.</p><p>Therefore, I decided to introduce a mapping table for rooms and users; also known <a href="https://en.wikipedia.org/wiki/Many-to-many_(data_model)">as many-to-many relationship in relational databases</a>. This basically is a table with two columns: User and Room, both of which store the id/mail of a corresponding record. Whenever a user adds a room to their favorites, a new row with the corresponding mapping is added to the table and deleted, if the user removes it from the favorites. This approach has a surprising advantage besides its scalability and failure prevention: changes are shown to the user in real time, whereas the text column approach requires a manual sync to show changes in the UI. Though I couldn&#x27;t find documentation for this behavior, it is good to know that row-level operations allow for instantaneous UI updates. We can see this when implementing our &quot;favorite&quot; buttons: navigate to Behavior → Actions and create a new action called &quot;add room favorite&quot;.  Select the <em>Room</em> table and tell it to &quot;add a new row to another table using values from this row&quot; and choose the <em>Room Favorite</em> table to add to. The column setup is shown in the following screenshot.</p><p><img src="//images.ctfassets.net/8iljeer8gbww/1Qmitxno4c1ZYYYoE0jRWO/c2821ce62e01ae65e2be194a3fb49b1a/img-appsheet-favorite-action.png" alt="img-appsheet-favorite-action"/></p><p>In the Behavior section of this action, I add a little snippet to the visibility condition:</p><pre style="display:block;overflow-x:auto;padding:1em;background:var(--color-background);color:var(--color-text)"><code class="language-javascript">ISBLANK(
  FILTER(
    &quot;Room Favorite&quot;,
    AND(
      USEREMAIL() = [User],
      [_THISROW].[Id] = [Room]
    )
  )
)</code></pre><p>This ensures that the button is only shown, when the room is not already a favorite of this user. Now we can add a corresponding &quot;unfavorite&quot; button, which is only shown, when the opposite condition is true:</p><pre style="display:block;overflow-x:auto;padding:1em;background:var(--color-background);color:var(--color-text)"><code class="language-javascript">ISNOTBLANK(
  FILTER(
    &quot;Room Favorite&quot;,
    AND(
      USEREMAIL() = [User],
      [_THISROW].[Id] = [Room]
    )
  )
)</code></pre><p>The logic here is to filter for all rooms, which have an entry in the <em>Room Favorite</em> table, while this entry also matches the currently signed in user. The table setup for this action is identical to above&#x27;s action, but it instead &quot;executes an action on a set of rows&quot;, which we set to the the system-level &quot;Delete&quot; action. The referenced rows to delete are given by this formula: <code>FILTER(&quot;Room Favorite&quot;, [_THISROW].[Id] = [Room])</code> selecting all favorite entries that match the given room. To see the potential of AppSheet&#x27;s actions and workflows, you may want to <a href="https://www.kevlatus.de/blog/syncing-calendar-events-with-appsheet">check out this article</a>.</p><p>To actually present a user&#x27;s favorites in the UI, we again make use of the slices feature by creating a slice called &quot;My Room Favorites&quot; based on the <em>Room</em> table. The filter condition is the same as for the &quot;unfavorite button, since this already filters for all favorite rooms. As before, we can now select this slice for a new view in the UX menu. The final behavior can be seen in the animation below.</p><p><img src="//images.ctfassets.net/8iljeer8gbww/6MKUiP7fWDKapcNwYOlGtv/97c41280005a322dfc7a132f949859e0/room-favorite-navigation.gif" alt="room-favorite-navigation"/></p><p><strong>Bonus tip #1:</strong> I set the actions&#x27; appearance to &quot;Display overlay&quot; and chose a regular and a solid star icon for the favorite and unfavorite actions respectively to mimic common implementations.</p><p><strong>Bonus tip #2:</strong> You can &quot;show system actions&quot; at the bottom of the actions page to show the favorite table&#x27;s delete action. Here you can disable the confirmation toggle, so a user can delete a favorite without being shown a confirmation dialog.</p><p>I hope this short introduction into personalization with AppSheet was helpful to you. You can find the <a href="https://www.appsheet.com/Template/AppDef?appName=RoomBooker-2164883">complete app template here</a>, as well as <a href="https://docs.google.com/spreadsheets/d/1Kowowbe6Z8kBwCVQSM9e4YlKmLiDfJV_V-2ONmD0pAY/edit#gid=1755648877">its data source</a>. Please join the discussion, if you have any questions or know of similar use cases for the shown features.</p><div class="flex"><div class="flex-grow"></div><a target="_blank" href="https://twitter.com/search?q=https%3A%2F%2Fwww.kevlatus.de%2Fblog%2Fdisplaying-personalized-content-in-appsheet">Join the discussion</a><div class="flex-grow"></div></div></article></main><footer class="px-8 py-2 flex items-center justify-center"><ul class="flex space-x-4"><li><a class="group flex flex-col justify-center items-center relative" href="https://github.com/kevlatus"><div class="flex type-display text-xl hidden md:flex"><div class="transition" style="transform:translateY(0) rotate(0)">G</div><div class="transition" style="transform:translateY(0) rotate(0)">i</div><div class="transition" style="transform:translateY(0) rotate(0)">t</div><div class="transition" style="transform:translateY(0) rotate(0)">h</div><div class="transition" style="transform:translateY(0) rotate(0)">u</div><div class="transition" style="transform:translateY(0) rotate(0)">b</div></div><div class="type-display text-xl md:hidden">Github</div><div class="absolute hidden md:flex items-center transform scale-0 transition-transform group-hover:scale-100"><svg viewBox="0 0 1024 1024" fill="none" class="fill-current w-6 h-6"><path clip-rule="evenodd" d="M512 0C229.12 0 0 229.12 0 512c0 226.56 146.56 417.92 350.08 485.76 25.6 4.48 35.2-10.88 35.2-24.32 0-12.16-.64-52.48-.64-95.36-128.64 23.68-161.92-31.36-172.16-60.16-5.76-14.72-30.72-60.16-52.48-72.32-17.92-9.6-43.52-33.28-.64-33.92 40.32-.64 69.12 37.12 78.72 52.48 46.08 77.44 119.68 55.68 149.12 42.24 4.48-33.28 17.92-55.68 32.64-68.48-113.92-12.8-232.96-56.96-232.96-252.8 0-55.68 19.84-101.76 52.48-137.6-5.12-12.8-23.04-65.28 5.12-135.68 0 0 42.88-13.44 140.8 52.48 40.96-11.52 84.48-17.28 128-17.28 43.52 0 87.04 5.76 128 17.28 97.92-66.56 140.8-52.48 140.8-52.48 28.16 70.4 10.24 122.88 5.12 135.68 32.64 35.84 52.48 81.28 52.48 137.6 0 196.48-119.68 240-233.6 252.8 18.56 16 34.56 46.72 34.56 94.72 0 68.48-.64 123.52-.64 140.8 0 13.44 9.6 29.44 35.2 24.32C877.44 929.92 1024 737.92 1024 512 1024 229.12 794.88 0 512 0z"></path></svg></div></a></li><li><a class="group flex flex-col justify-center items-center relative" href="https://linkedin.com/in/kevlatus"><div class="flex type-display text-xl hidden md:flex"><div class="transition" style="transform:translateY(0) rotate(0)">L</div><div class="transition" style="transform:translateY(0) rotate(0)">i</div><div class="transition" style="transform:translateY(0) rotate(0)">n</div><div class="transition" style="transform:translateY(0) rotate(0)">k</div><div class="transition" style="transform:translateY(0) rotate(0)">e</div><div class="transition" style="transform:translateY(0) rotate(0)">d</div><div class="transition" style="transform:translateY(0) rotate(0)">I</div><div class="transition" style="transform:translateY(0) rotate(0)">n</div></div><div class="type-display text-xl md:hidden">LinkedIn</div><div class="absolute hidden md:flex items-center transform scale-0 transition-transform group-hover:scale-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current w-6 h-6"><path d="M19 0H5a5 5 0 00-5 5v14a5 5 0 005 5h14a5 5 0 005-5V5a5 5 0 00-5-5zM8 19H5V8h3v11zM6.5 6.732c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zM20 19h-3v-5.604c0-3.368-4-3.113-4 0V19h-3V8h3v1.765c1.396-2.586 7-2.777 7 2.476V19z"></path></svg></div></a></li><li><a class="group flex flex-col justify-center items-center relative" href="https://twitter.com/kevlatus"><div class="flex type-display text-xl hidden md:flex"><div class="transition" style="transform:translateY(0) rotate(0)">T</div><div class="transition" style="transform:translateY(0) rotate(0)">w</div><div class="transition" style="transform:translateY(0) rotate(0)">i</div><div class="transition" style="transform:translateY(0) rotate(0)">t</div><div class="transition" style="transform:translateY(0) rotate(0)">t</div><div class="transition" style="transform:translateY(0) rotate(0)">e</div><div class="transition" style="transform:translateY(0) rotate(0)">r</div></div><div class="type-display text-xl md:hidden">Twitter</div><div class="absolute hidden md:flex items-center transform scale-0 transition-transform group-hover:scale-100"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current w-6 h-6"><path d="M24 4.557a9.83 9.83 0 01-2.828.775 4.932 4.932 0 002.165-2.724 9.864 9.864 0 01-3.127 1.195 4.916 4.916 0 00-3.594-1.555c-3.179 0-5.515 2.966-4.797 6.045A13.978 13.978 0 011.671 3.149a4.93 4.93 0 001.523 6.574 4.903 4.903 0 01-2.229-.616c-.054 2.281 1.581 4.415 3.949 4.89a4.935 4.935 0 01-2.224.084 4.928 4.928 0 004.6 3.419A9.9 9.9 0 010 19.54a13.94 13.94 0 007.548 2.212c9.142 0 14.307-7.721 13.995-14.646A10.025 10.025 0 0024 4.557z"></path></svg></div></a></li></ul></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"article":{"sys":{"id":"6oOyWHOVNwDf7GXe6UfCYX"},"date":"2021-02-13T00:00:00.000Z","title":"Displaying personalized content in AppSheet","slug":"displaying-personalized-content-in-appsheet","content":"I'm currently trying to build apps without writing code to find the limits and potential of no-code platforms. This article adds personalization to [a room booking app built with AppSheet](https://www.kevlatus.de/blog/building-a-room-booking-app-without-writing-code). The app allows users to manage rooms within their buildings and booking those rooms for meetings. If you are new to AppSheet, I recommend [reading this article](https://www.kevlatus.de/blog/building-a-room-booking-app-without-writing-code) first.\n\nOur goal is to show users a list of their bookings as well as their favorite rooms. These views enhance user experience tremendously by providing quick access to relevant information. Let's get started with the personal booking overview: it makes use of AppSheet's slices under Data \u003e Slices in the menu. A slice is a filtered subset of data, which can be used like a table. Since a booking already contains a column for the corresponding user, the filter condition is simply `[User] = USEREMAIL()`, as shown in the screenshot below.\n\n![img-appsheet-booking-slice](//images.ctfassets.net/8iljeer8gbww/17cvRud0N3euvGTPXPlgkW/51ebc888636be1dafdd36553a53b6349/img-appsheet-booking-slice.jpg)\n\nNow, this slice can be used as the source of a new view in the UX menu. We call it \"My Bookings\" and select our slice _for this data_. I personally prefer the card view for this page, because it lets us show the room's picture, name and booking date, which makes for a clean and simple overview. And actually, that's all what is needed for adding the personal booking list.\n\nBuilding the favorite rooms view turns out to be trickier. When browsing through AppSheet's features, you might stumble upon its _User Settings_ in the _Data_ menu. While this sounds like a suitable solution for storing preferences and favorites, it suffers from a hidden limitation: values stored in user settings are not synced across devices. This would lead to favorites being different, depending on the device a user opens your app on. Though useful in some situations, I'd rather keep the experience consistent across mobile and the web by writing the information into a Google Sheet.\n\nWhen initially working on this feature, I found an approach [in the forums](https://community.appsheet.com/t/i-would-like-to-create-a-favorites-behavior/3811), which adds and removes users' email addresses to a text column. Although this is a simple solution, which works in small apps, larger apps will run into issues: two users simultaneously adding a room to their favorites, results in a race condition for updating the cell value and data from one of the users might not be stored. Furthermore, searching for mail addresses in a long string of a much liked room is rather time consuming and decreases performance for loading favorites.\n\nTherefore, I decided to introduce a mapping table for rooms and users; also known [as many-to-many relationship in relational databases](https://en.wikipedia.org/wiki/Many-to-many_(data_model)). This basically is a table with two columns: User and Room, both of which store the id/mail of a corresponding record. Whenever a user adds a room to their favorites, a new row with the corresponding mapping is added to the table and deleted, if the user removes it from the favorites. This approach has a surprising advantage besides its scalability and failure prevention: changes are shown to the user in real time, whereas the text column approach requires a manual sync to show changes in the UI. Though I couldn't find documentation for this behavior, it is good to know that row-level operations allow for instantaneous UI updates. We can see this when implementing our \"favorite\" buttons: navigate to Behavior → Actions and create a new action called \"add room favorite\".  Select the _Room_ table and tell it to \"add a new row to another table using values from this row\" and choose the _Room Favorite_ table to add to. The column setup is shown in the following screenshot.\n\n![img-appsheet-favorite-action](//images.ctfassets.net/8iljeer8gbww/1Qmitxno4c1ZYYYoE0jRWO/c2821ce62e01ae65e2be194a3fb49b1a/img-appsheet-favorite-action.png)\n\nIn the Behavior section of this action, I add a little snippet to the visibility condition:\n\n```javascript\nISBLANK(\n  FILTER(\n    \"Room Favorite\",\n    AND(\n      USEREMAIL() = [User],\n      [_THISROW].[Id] = [Room]\n    )\n  )\n)\n```\n\nThis ensures that the button is only shown, when the room is not already a favorite of this user. Now we can add a corresponding \"unfavorite\" button, which is only shown, when the opposite condition is true:\n\n```javascript\nISNOTBLANK(\n  FILTER(\n    \"Room Favorite\",\n    AND(\n      USEREMAIL() = [User],\n      [_THISROW].[Id] = [Room]\n    )\n  )\n)\n```\n\nThe logic here is to filter for all rooms, which have an entry in the _Room Favorite_ table, while this entry also matches the currently signed in user. The table setup for this action is identical to above's action, but it instead \"executes an action on a set of rows\", which we set to the the system-level \"Delete\" action. The referenced rows to delete are given by this formula: `FILTER(\"Room Favorite\", [_THISROW].[Id] = [Room])` selecting all favorite entries that match the given room. To see the potential of AppSheet's actions and workflows, you may want to [check out this article](https://www.kevlatus.de/blog/syncing-calendar-events-with-appsheet).\n\nTo actually present a user's favorites in the UI, we again make use of the slices feature by creating a slice called \"My Room Favorites\" based on the _Room_ table. The filter condition is the same as for the \"unfavorite button, since this already filters for all favorite rooms. As before, we can now select this slice for a new view in the UX menu. The final behavior can be seen in the animation below.\n\n![room-favorite-navigation](//images.ctfassets.net/8iljeer8gbww/6MKUiP7fWDKapcNwYOlGtv/97c41280005a322dfc7a132f949859e0/room-favorite-navigation.gif)\n\n__Bonus tip #1:__ I set the actions' appearance to \"Display overlay\" and chose a regular and a solid star icon for the favorite and unfavorite actions respectively to mimic common implementations.\n\n__Bonus tip #2:__ You can \"show system actions\" at the bottom of the actions page to show the favorite table's delete action. Here you can disable the confirmation toggle, so a user can delete a favorite without being shown a confirmation dialog.\n\nI hope this short introduction into personalization with AppSheet was helpful to you. You can find the [complete app template here](https://www.appsheet.com/Template/AppDef?appName=RoomBooker-2164883), as well as [its data source](https://docs.google.com/spreadsheets/d/1Kowowbe6Z8kBwCVQSM9e4YlKmLiDfJV_V-2ONmD0pAY/edit#gid=1755648877). Please join the discussion, if you have any questions or know of similar use cases for the shown features.\n","tags":null}},"__N_SSG":true},"page":"/blog/[slug]","query":{"slug":"displaying-personalized-content-in-appsheet"},"buildId":"goZOa18zU6-eQqfKiPrTm","nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-761982c2fac2274a18f7.js"></script><script src="/_next/static/chunks/main-2655500d03e7dd101362.js" async=""></script><script src="/_next/static/chunks/webpack-3fa9c3f14a376ed1bf6b.js" async=""></script><script src="/_next/static/chunks/framework.f783f7e0d786735fc5cd.js" async=""></script><script src="/_next/static/chunks/139d2c06ce5befccb6edae863d7326790fa3e613.1f52a3ec41a5d5095e70.js" async=""></script><script src="/_next/static/chunks/pages/_app-c554078b78e7d9d328a5.js" async=""></script><script src="/_next/static/chunks/06cfb1e0a9d9bd2a46840ce3dc1d97af8be2589f.ad1af2db6fc57853b772.js" async=""></script><script src="/_next/static/chunks/pages/blog/%5Bslug%5D-af3bc8689d0109f413c9.js" async=""></script><script src="/_next/static/goZOa18zU6-eQqfKiPrTm/_buildManifest.js" async=""></script><script src="/_next/static/goZOa18zU6-eQqfKiPrTm/_ssgManifest.js" async=""></script></body></html>